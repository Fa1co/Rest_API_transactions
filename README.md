# Rest_API_transactions

REST API для системы учета транзакций

# Эндпоинты:
1) Авторизация. Параметры: email и пароль
2) Записать транзакцию: Параметры: Сумма (Число), Дата(Дата без времени), Категория (Строка) /  Доступно авторизованным пользователям
3) Получить все записанные пользователем тарнзакции (включая прошлые сессии) / Ответ в формате JSON / Доступно авторизованным пользователям

# Варианты использования:
1) Пользователь авторизуется исползуя эндпоинт (1) (если такого пользователя нет то он создается) получает сессионный токен.
2) Пользователь записывает транзакции используя эндпоинт (2)
3) Пользователь может прочитать все свои транзакции используя эндпоинт (3)

# Средства разработки
Фреймворк: Flask
База данных: Sqllite

# База данных
В базе данных используются 2 модели: User и Transaction
```
Модель User:
user_id - Уникальный номер для каждого пользователя
e_mail - Поле, где хранится электронная почта пользователя
password - Поле, где хранится хешированный пароль пользователя
```

```
Модель Transaction:
transaction_id - Уникальный номер транзакций 
transaction_sum - Поле, где хранится сумма транзакций
transaction_date - Поле, где хранится дата транзакций
transaction_category - Поле, где хранится Категория транзакций
user_id - Уникальный номер пользователя
```

# Тестирование API
Тестирование API проводилось с помощью Postman

## Авторизация
Запрос на авторизацию
```
{
    "email": "fwefwef@gmail.com",
    "password": "12dqwfqwf"

}
```
Ответ
```
{
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmcmVzaCI6ZmFsc2UsImlhdCI6MTY5MzY0ODc3MywianRpIjoiZmIyY2MyMDQtYjEwMS00MDY2LTkyYTgtYmIxYWI1ODIwMDE2IiwidHlwZSI6ImFjY2VzcyIsInN1YiI6IjEiLCJuYmYiOjE2OTM2NDg3NzMsImV4cCI6MTY5NDI1MzU3M30.lKlQrRIQh41Mi190jLwX8k4jAtaxsh3J5zU3xqafz9E"
}
```
## Список всех транзакций пользователя
Ответ на запрос без сессионного ключа
```
{
    "msg": "Missing Authorization Header"
}
```
Ответ на запрос с сессионным ключом
```
"[{\"transaction_id\": 1, \"sum\": 123.0, \"date\": \"23-02-2023\", \"category\": \"Еда\"}, {\"transaction_id\": 2, \"sum\": 999.0, \"date\": \"02-09-2023\", \"category\": \"Такси\"}]"
```

## Записать транзакцию
Запрос без сессионного ключа
```
{
    "transaction_sum": "547",
    "transaction_date": "01-09-2023",
    "transaction_category": "Перевод"
}
```
Ответ на запрос без сессионного ключа
```
{
    "msg": "Missing Authorization Header"
}
```
Запрос с сессионным ключем
```
{
    "transaction_sum": "547",
    "transaction_date": "01-09-2023",
    "transaction_category": "Перевод"
}
```
Ответ с сессионным ключем
```
""
```


